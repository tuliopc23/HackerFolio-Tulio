# Repository Guidelines

## Project Structure & Module Organization
- `client/` – React app (Vite). Entry in `client/index.html`; source in `client/src/` (components, pages, hooks, lib). Tests live in `client/__tests__/` and `client/src/__tests__/`.
- `server/` – Elysia (Bun) API and SSR. Main entry `server/app.ts`; modules under `server/{routes,lib,utils,db,middleware,types}`. Tests in `server/__tests__/`.
- `drizzle/` – SQL migrations and schema generated by Drizzle.
- `database/` – local SQLite database artifacts (do not commit new binaries).
- `dist/` and `.output/` – build outputs.

## Build, Test, and Development Commands
- `bun run dev` – Start server (hot) and Vite dev client concurrently.
- `bun run build` – Build client (CSR) and server bundle (SSR) via Vite.
- `bun run start:production` – Run the built server in production mode.
- `bun run test` – Run Vitest once with jsdom and coverage.
- `bun run check:all` – Type check, lint, format check, and tests.
- `bun run fix:all` – Apply Prettier and ESLint fixes.
- DB helpers (direct): `bun server/db/migrate.ts`, `bun server/db/seed.ts`.

## Coding Style & Naming Conventions
- TypeScript everywhere; 2‑space indent; semicolons; single quotes (Prettier enforced).
- React components and files: PascalCase (e.g., `LoadingScreen.tsx`). Utilities: camelCase. Routes and CSS may use kebab-case.
- Absolute imports: `@` → `client/src`, `@server` → `server`.
- Tools: ESLint (`eslint.config.js`) + Prettier (`.prettierrc.json`). Run `check:lint`/`fix:lint` and `check:format`/`fix:format` before pushing.

## Testing Guidelines
- Framework: Vitest + Testing Library (`jsdom`). Place tests next to code under `__tests__` or as `*.test.ts(x)`.
- Coverage: global 80% (branches/functions/lines/statements). Higher thresholds for `client/src/components/**` and `server/lib/**` per `vitest.config.ts`.
- Run `bun run test` locally; inspect HTML report in `coverage/`.

## Commit & Pull Request Guidelines
- Prefer Conventional Commits (`feat:`, `fix:`, `chore:`, `refactor:`). Keep subjects imperative and under ~72 chars.
- PRs must include: clear description, linked issues (`Closes #123`), test updates, and screenshots/GIFs for UI changes.
- Ensure `bun run check:all` passes and no files in `database/` or `.env` changes are committed. Use Draft PRs for WIP.

## Security & Configuration
- Copy `.env.example` to `.env`. Never commit secrets. Server config lives in `server/lib/env.ts` and `server/lib/security.ts`.
- CORS/static config via Elysia plugins; review before exposing new routes (`server/routes/`).

